CREATE TABLE PROTOCOL_REVIEW_TYPE ( 
    PROTOCOL_REVIEW_TYPE_CODE VARCHAR2(3) NOT NULL, 
    DESCRIPTION VARCHAR2(200) NOT NULL, 
    UPDATE_TIMESTAMP DATE NOT NULL, 
    UPDATE_USER VARCHAR2(60) NOT NULL,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);

ALTER TABLE PROTOCOL_REVIEW_TYPE 
ADD CONSTRAINT PK_PROTOCOL_REVIEW_TYPE 
PRIMARY KEY (PROTOCOL_REVIEW_TYPE_CODE);

INSERT INTO PROTOCOL_REVIEW_TYPE (PROTOCOL_REVIEW_TYPE_CODE, DESCRIPTION, UPDATE_TIMESTAMP,UPDATE_USER) VALUES ('1', 'Full', sysdate,'KRADEV');
INSERT INTO PROTOCOL_REVIEW_TYPE (PROTOCOL_REVIEW_TYPE_CODE, DESCRIPTION, UPDATE_TIMESTAMP,UPDATE_USER) VALUES ('2', 'Expedited', sysdate,'KRADEV');
INSERT INTO PROTOCOL_REVIEW_TYPE (PROTOCOL_REVIEW_TYPE_CODE, DESCRIPTION, UPDATE_TIMESTAMP,UPDATE_USER) VALUES ('3', 'Exempt', sysdate,'KRADEV');



CREATE TABLE COMMITTEE_TYPE ( 
    COMMITTEE_TYPE_CODE VARCHAR2(3) NOT NULL, 
    DESCRIPTION VARCHAR2(200) NOT NULL, 
    UPDATE_TIMESTAMP DATE NOT NULL, 
    UPDATE_USER VARCHAR2(60) NOT NULL,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);

ALTER TABLE COMMITTEE_TYPE 
ADD CONSTRAINT PK_COMMITTEE_TYPE 
PRIMARY KEY (COMMITTEE_TYPE_CODE);

INSERT INTO COMMITTEE_TYPE (COMMITTEE_TYPE_CODE, DESCRIPTION, UPDATE_TIMESTAMP,UPDATE_USER) VALUES ('1', 'IRB', sysdate,'KRADEV');



CREATE TABLE COMMITTEE ( 
    ID NUMBER(12,0) NOT NULL,
    DOCUMENT_NUMBER NUMBER(10) NOT NULL,
    COMMITTEE_ID VARCHAR2(15) NOT NULL,
    COMMITTEE_NAME VARCHAR2(60) NOT NULL,
    HOME_UNIT_NUMBER VARCHAR2(8) NOT NULL,
    DESCRIPTION VARCHAR2(2000),
    SCHEDULE_DESCRIPTION VARCHAR2(2000),
    COMMITTEE_TYPE_CODE VARCHAR2(3) NOT NULL,
    MINIMUM_MEMBERS_REQUIRED NUMBER(3,0),
    MAX_PROTOCOLS NUMBER(4,0),
    ADV_SUBMISSION_DAYS_REQ NUMBER(3,0),
    DEFAULT_REVIEW_TYPE_CODE VARCHAR2(3),
    APPLICABLE_REVIEW_TYPE_CODE VARCHAR2(3) NOT NULL,
    CREATE_TIMESTAMP DATE, 
    CREATE_USER VARCHAR2(8),
    UPDATE_TIMESTAMP DATE NOT NULL, 
    UPDATE_USER VARCHAR2(60) NOT NULL,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT PK_COMMITTEE
PRIMARY KEY (ID);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT UQ_COMMITTEE_ID
UNIQUE (COMMITTEE_ID);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT FK_COMMITTEE_1
FOREIGN KEY (COMMITTEE_TYPE_CODE) 
REFERENCES COMMITTEE_TYPE (COMMITTEE_TYPE_CODE);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT FK_COMMITTEE_2
FOREIGN KEY (HOME_UNIT_NUMBER) 
REFERENCES UNIT (UNIT_NUMBER);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT FK_COMMITTEE_3
FOREIGN KEY (DEFAULT_REVIEW_TYPE_CODE)
REFERENCES PROTOCOL_REVIEW_TYPE (PROTOCOL_REVIEW_TYPE_CODE);

ALTER TABLE COMMITTEE 
ADD CONSTRAINT FK_COMMITTEE_4
FOREIGN KEY (APPLICABLE_REVIEW_TYPE_CODE) 
REFERENCES PROTOCOL_REVIEW_TYPE (PROTOCOL_REVIEW_TYPE_CODE);



CREATE TABLE COMMITTEE_DOCUMENT ( 
    DOCUMENT_NUMBER NUMBER(10) NOT NULL,
    UPDATE_TIMESTAMP DATE NOT NULL, 
    UPDATE_USER VARCHAR2(60) NOT NULL,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);

ALTER TABLE COMMITTEE_DOCUMENT 
ADD CONSTRAINT PK_COMMITTEE_DOCUMENT 
PRIMARY KEY (DOCUMENT_NUMBER);

ALTER TABLE COMMITTEE
ADD CONSTRAINT FK_COMMITTEE_DOCUMENT 
FOREIGN KEY (DOCUMENT_NUMBER) 
REFERENCES COMMITTEE_DOCUMENT (DOCUMENT_NUMBER);


INSERT INTO FP_DOC_TYPE_T (FDOC_TYP_CD,FDOC_NM,FDOC_TYP_ACTIVE_CD) VALUES ('COMT','COMMITTEE','Y');

CREATE SEQUENCE SEQ_COMMITTEE_ID INCREMENT BY 1 START WITH 1;

