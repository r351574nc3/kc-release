
DROP VIEW OSP$PROTOCOL_RESEARCH_AREAS;

DROP TABLE PROTOCOL_RESEARCH_AREAS;

/* Table Script */ 

CREATE TABLE PROTOCOL_RESEARCH_AREAS (
  ID NUMBER(12) NOT null,
  PROTOCOL_ID NUMBER(12,0) NOT NULL,
  PROTOCOL_NUMBER     varchar2 (20)  NOT null,
  SEQUENCE_NUMBER     number (4, 0)    NOT null,
  RESEARCH_AREA_CODE  varchar2 (8)  NOT null,
  UPDATE_TIMESTAMP DATE NOT NULL, 
  UPDATE_USER VARCHAR2(60) NOT NULL,
  VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
  OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);

  /* Primary Key Constraint */ 
ALTER TABLE PROTOCOL_RESEARCH_AREAS 
ADD CONSTRAINT PK_PROTOCOL_RESEARCH_AREAS 
PRIMARY KEY (ID);

ALTER TABLE PROTOCOL_RESEARCH_AREAS 
ADD CONSTRAINT FK_PROTOCOL_RESEARCH_AREAS 
FOREIGN KEY (PROTOCOL_ID) 
REFERENCES PROTOCOL (PROTOCOL_ID);

ALTER TABLE PROTOCOL_RESEARCH_AREAS 
ADD CONSTRAINT FK_PROTOCOL_RESEARCH_AREAS2
FOREIGN KEY (RESEARCH_AREA_CODE) 
REFERENCES RESEARCH_AREAS (RESEARCH_AREA_CODE);

/* View Script */
CREATE OR REPLACE VIEW OSP$PROTOCOL_RESEARCH_AREAS AS SELECT 
  PROTOCOL_NUMBER,
  SEQUENCE_NUMBER,
  RESEARCH_AREA_CODE,
  UPDATE_TIMESTAMP, 
  UPDATE_USER
FROM PROTOCOL_RESEARCH_AREAS;

CREATE SEQUENCE SEQ_PROTOCOL_RESEARCH_AREAS_ID INCREMENT BY 1 START WITH 1;

COMMIT;