CREATE SEQUENCE SEQ_PROTOCOL_SPECIAL_REVIEW_ID INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_PROTOCOL_EXEMPT_NUMBER_ID INCREMENT BY 1 START WITH 1;

CREATE TABLE PROTOCOL_EXEMPT_NUMBER (
    PROTOCOL_EXEMPT_NUMBER_ID  NUMBER(12,0) NOT NULL,
    PROTOCOL_SPECIAL_REVIEW_ID NUMBER(12,0) NOT NULL,
    EXEMPTION_TYPE_CODE VARCHAR2(3 BYTE) NOT NULL ENABLE,
    UPDATE_USER VARCHAR2(60 BYTE) NOT NULL ENABLE,
    UPDATE_TIMESTAMP DATE NOT NULL ENABLE,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL ENABLE,
    OBJ_ID VARCHAR2(36 BYTE) DEFAULT SYS_GUID() NOT NULL ENABLE);

CREATE TABLE PROTOCOL_SPECIAL_REVIEW (
    PROTOCOL_SPECIAL_REVIEW_ID NUMBER(12,0) NOT NULL,
    PROTOCOL_ID NUMBER(12,0) NOT NULL,
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL,
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL,
    SPECIAL_REVIEW_NUMBER NUMBER(3,0) NOT NULL,
    SPECIAL_REVIEW_CODE NUMBER(3,0) NOT NULL,
    APPROVAL_TYPE_CODE NUMBER(3,0) NOT NULL,
    PROTOCOL_NUMBER VARCHAR2(20),
    APPLICATION_DATE DATE,
    APPROVAL_DATE DATE,
    EXPIRATION_DATE DATE,
    COMMENTS CLOB,
    UPDATE_USER VARCHAR2(60) NOT NULL,
    UPDATE_TIMESTAMP DATE NOT NULL);

ALTER TABLE PROTOCOL_SPECIAL_REVIEW 
ADD CONSTRAINT PK_PROTOCOL_SPECIAL_REVIEW 
PRIMARY KEY (PROTOCOL_SPECIAL_REVIEW_ID);

ALTER TABLE PROTOCOL_EXEMPT_NUMBER 
ADD CONSTRAINT PK_PROTOCOL_EXEMPT_NUMBER 
PRIMARY KEY (PROTOCOL_EXEMPT_NUMBER_ID);

ALTER TABLE PROTOCOL_EXEMPT_NUMBER 
ADD CONSTRAINT FK_PROTOCOL_SPECIAL_REVIEW_ID 
FOREIGN KEY (PROTOCOL_SPECIAL_REVIEW_ID) 
REFERENCES PROTOCOL_SPECIAL_REVIEW (PROTOCOL_SPECIAL_REVIEW_ID);

ALTER TABLE PROTOCOL_EXEMPT_NUMBER 
ADD CONSTRAINT FK_PROT_EXEMPTION_TYPE_CODE 
FOREIGN KEY (EXEMPTION_TYPE_CODE) 
REFERENCES EXEMPTION_TYPE (EXEMPTION_TYPE_CODE);

ALTER TABLE PROTOCOL_SPECIAL_REVIEW 
ADD CONSTRAINT FK_PROTOCOL_SPECIAL_REVIEW 
FOREIGN KEY (PROTOCOL_ID) 
REFERENCES PROTOCOL (PROTOCOL_ID);

commit;
